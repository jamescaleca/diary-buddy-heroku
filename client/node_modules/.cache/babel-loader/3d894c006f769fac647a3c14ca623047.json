{"ast":null,"code":"var _jsxFileName = \"/Users/jamescaleca/Desktop/diary-buddy/client/diary-buddy/src/contexts/userEntryContext.js\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nimport React, { useEffect, useState, createContext, useContext } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport axios from \"axios\";\nimport Entry from \"../components/Entry\";\nimport \"../styles.css\";\nimport { createElement as _createElement } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst EntriesContext = /*#__PURE__*/createContext();\n\nfunction EntriesContextProvider(props) {\n  _s();\n\n  const [entries, setEntries] = useState([]);\n  const [search, setSearch] = useState('');\n  const [searchData, setSearchData] = useState([]);\n\n  function getEntries() {\n    axios.get(\"/entries\").then(res => setEntries(res.data)).catch(err => console.log(err.response.data.errMsg));\n  }\n\n  function getEntryById(entryId) {\n    axios.get(`/entries/${entryId}`).then(res => setEntries(res.data)).catch(err => console.log(err.response.data.errMsg));\n  }\n\n  useEffect(() => {\n    getEntries();\n  }, []);\n\n  function postEntry(newEntry) {\n    console.log(\"new entry\", newEntry);\n    axios.post(\"/entries\", newEntry).then(res => {\n      setEntries(prevEntries => [...prevEntries, res.data]);\n    }).catch(err => console.log(err));\n  }\n\n  function deleteEntry(entryId) {\n    axios.delete(`/entries/${entryId}`).then(res => {\n      setEntries(prevEntries => prevEntries.filter(entry => entry.id !== entryId));\n      axios.get('/entries').then(res => setEntries(res.data));\n    }).catch(err => console.log(err));\n  }\n\n  function editEntry(updates, entryId) {\n    axios.put(`/entries/${entryId}`, updates).then(res => {\n      setEntries(prevEntries => prevEntries.map(entry => entry._id !== entry.Id ? entry : res.data));\n    }).catch(err => console.log(err));\n  }\n\n  const allEntries = entries.map(entry => /*#__PURE__*/_jsxDEV(\"li\", {\n    children: /*#__PURE__*/_createElement(Entry, { ...entry,\n      key: entry.title,\n      deleteEntry: deleteEntry,\n      editEntry: editEntry,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 13\n      }\n    })\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 58,\n    columnNumber: 9\n  }, this)); // For Entry Search\n\n  const filterEntries = e => {\n    axios.get(`/entries/search?entry=${search}`).then(res => {\n      const searchData = res.data;\n      setSearchData(searchData);\n    });\n  };\n\n  const searchResults = searchData.length > 0 ? searchData.map(entry => /*#__PURE__*/_jsxDEV(\"li\", {\n    className: \"search-entry-li\",\n    children: /*#__PURE__*/_createElement(Entry, { ...entry,\n      key: entry.title,\n      deleteEntry: deleteEntry,\n      editEntry: editEntry,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 17\n      }\n    })\n  }, entry._id, false, {\n    fileName: _jsxFileName,\n    lineNumber: 80,\n    columnNumber: 13\n  }, this)) : /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"h3\", {\n      children: \"No results\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 13\n    }, this)\n  }, void 0, false); // When entries are submitted, the user will go to the \"Your Entries\" tab.\n\n  const history = useHistory();\n\n  function submitBtnRedirect() {\n    history.push('/user-entries');\n  }\n\n  return /*#__PURE__*/_jsxDEV(EntriesContext.Provider, {\n    value: {\n      allEntries,\n      searchResults,\n      search,\n      setSearch,\n      searchData,\n      setSearchData,\n      filterEntries,\n      getEntryById,\n      editEntry,\n      postEntry,\n      deleteEntry,\n      history,\n      submitBtnRedirect\n    },\n    children: props.children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 102,\n    columnNumber: 9\n  }, this);\n}\n\n_s(EntriesContextProvider, \"xwHyBxvh0aOwjohJ7Ai8WJa2aDA=\", false, function () {\n  return [useHistory];\n});\n\n_c = EntriesContextProvider;\n\nconst useEntries = () => {\n  _s2();\n\n  const context = useContext(EntriesContext);\n  if (!context) throw new Error(\"You must use Provider to consume Context\");\n  return context;\n};\n\n_s2(useEntries, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\n\nexport { EntriesContextProvider, useEntries, EntriesContext };\n\nvar _c;\n\n$RefreshReg$(_c, \"EntriesContextProvider\");","map":{"version":3,"sources":["/Users/jamescaleca/Desktop/diary-buddy/client/diary-buddy/src/contexts/userEntryContext.js"],"names":["React","useEffect","useState","createContext","useContext","useHistory","axios","Entry","EntriesContext","EntriesContextProvider","props","entries","setEntries","search","setSearch","searchData","setSearchData","getEntries","get","then","res","data","catch","err","console","log","response","errMsg","getEntryById","entryId","postEntry","newEntry","post","prevEntries","deleteEntry","delete","filter","entry","id","editEntry","updates","put","map","_id","Id","allEntries","title","filterEntries","e","searchResults","length","history","submitBtnRedirect","push","children","useEntries","context","Error"],"mappings":"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","sourcesContent":["import React, { useEffect, useState, createContext, useContext } from \"react\"\nimport {useHistory} from \"react-router-dom\"\nimport axios from \"axios\"\nimport Entry from \"../components/Entry\"\nimport \"../styles.css\"\n\nconst EntriesContext = createContext()\n\nfunction EntriesContextProvider(props) {\n    const [entries, setEntries] = useState([])\n    const [search, setSearch] = useState('')\n    const [searchData, setSearchData] = useState([])\n\n    function getEntries() {\n        axios.get(\"/entries\")\n        .then(res => setEntries(res.data))\n        .catch(err => console.log(err.response.data.errMsg))\n    }\n\n    function getEntryById(entryId) {\n        axios.get(`/entries/${entryId}`)\n            .then(res => setEntries(res.data))\n            .catch(err => console.log(err.response.data.errMsg))\n    }\n\n    useEffect(() => {\n        getEntries()\n    }, [])\n\n    function postEntry(newEntry) {\n        console.log(\"new entry\", newEntry)\n        axios.post(\"/entries\", newEntry)\n            .then(res => {\n                setEntries(prevEntries => [...prevEntries, res.data])\n            })\n            .catch(err => console.log(err))\n    }\n\n    function deleteEntry(entryId) {\n        axios.delete(`/entries/${entryId}`)\n            .then(res => {\n                setEntries(prevEntries => prevEntries.filter(entry => entry.id !== entryId))\n                axios.get('/entries')\n                    .then(res => setEntries(res.data))\n            })\n            .catch(err => console.log(err))\n    }\n\n    function editEntry(updates, entryId) {\n        axios.put(`/entries/${entryId}`, updates)\n            .then(res => {\n                setEntries(prevEntries => prevEntries.map(entry => entry._id !== entry.Id ? entry : res.data))\n            })\n            .catch(err => console.log(err))\n    }\n\n    const allEntries = entries.map(entry => \n        <li>\n            <Entry \n                {...entry} \n                key={entry.title}\n                deleteEntry={deleteEntry}\n                editEntry={editEntry}\n            />\n        </li>\n    )\n\n    // For Entry Search\n    const filterEntries = (e) => {\n        axios\n            .get(`/entries/search?entry=${search}`)\n            .then(res => {\n                const searchData = res.data\n                setSearchData(searchData)\n            })\n    }\n\n    const searchResults = searchData.length > 0 ? \n        searchData.map(entry => (\n            <li className='search-entry-li' key={entry._id}>\n                <Entry\n                    {...entry}\n                    key={entry.title}\n                    deleteEntry={deleteEntry}\n                    editEntry={editEntry}\n                />\n            </li>\n        ))\n    :\n        <>\n            <h3>No results</h3>\n        </>\n\n    // When entries are submitted, the user will go to the \"Your Entries\" tab.\n    const history = useHistory()\n\n    function submitBtnRedirect() {\n        history.push('/user-entries')\n    }\n\n    return (\n        <EntriesContext.Provider value={{\n            allEntries,\n            searchResults,\n            search,\n            setSearch,\n            searchData,\n            setSearchData,\n            filterEntries,\n            getEntryById,\n            editEntry,\n            postEntry,\n            deleteEntry,\n            history,\n            submitBtnRedirect,\n        }}>{props.children}\n        </EntriesContext.Provider>\n    )\n}\n\nconst useEntries = () => {\n    const context = useContext(EntriesContext)\n    if (!context) throw new Error(\"You must use Provider to consume Context\");\n    return context\n}\n\nexport { EntriesContextProvider, useEntries, EntriesContext }"]},"metadata":{},"sourceType":"module"}